\chapter{Предисловие}

Большинство книг для высших учебных заведений по операционным системам
содержат раздел о синхронизации, в котором содержится описание набора примитивов
(мютекс, семафор, монитор и, иногда, условная переменная) и классических проблем.
Как, например, задачи о читателях-писателях и производителях-потребителях.

После прохождения курса по операционным системам в Беркли 
и преподавания его в колледже Колби, у меня сложилось впечатление,
что большинство студентов были способны понять решение этих задач,
но немногие смогли бы найти его, или решить похожие проблемы.

Одна из причин, почему студенты не глубоко понимают материал, в том,
что это требует больше времени и практики,
чем большинство учебных программ может выделить.
Синхронизация - это лишь один из модулей, претендующий на место в 
курсе по операционным системам.
И я не уверен, что смогу убедить в том, что самый важный, но я считаю,
он один из самых сложных, интересных и действительно веселых.

Я написал первый вариант этой книги с целью выявления
идиом и шаблонов синхронизации, которые можно было бы понять отдельно,
а потом соединить для решения комплексных задач.
Это был вызов, так как код для синхронизации не очень хорошо совмещается.
С возрастанием числа компонентов, число взаимодействий растёт бесконтрольно.

Тем не менее, я нашёл общее в решениях, которые наблюдал.
И обнаружил по крайней мере некоторые системные подходы для составления решений,
которые доказуемо корректны.

У меня появился шанс проверить этот подход, когда я преподавал курс
операционных систем в колледже Уэллсли.
Я использовал первый вариант {\em Маленькая книга о семафорах}
вместе с одной из стандартных книг.
И я преподавал синхронизацию как конкурентный поток по длительности в курсе.
Каждую неделю я давал студентам несколько страниц из книги,
заканчивающиеся задачей, иногда с подсказкой.
Я говорил им не смотреть на подсказку, пока они не зайдут в тупик.

Я также дал им некоторые инструменты для тестирования их решений:
небольшая белая магнитная доска, где они могли писать код, и набор магнитов
для представления потоков исполнения кода.

Результаты были впечатляющими.
Получив больше времени на изучение материала, студенты демонстрировали
глубину понимания, которую я раньше не видел.
Важнее то, что многие из них были способны решить большинство задач.
В некоторых случаях они переоткрывали классические решения,
в других - находили новые креативные подходы.

Когда я отправился в колледж Олин, я перешёл на следующий этап
и создал полукурс по синхронизации, в который входила
{\em Maленькая книга о семафорах}, а также реализация примитивов синхронизации
на языке ассемблера x86, POSIX и Python.

Студенты, которые взяли курс, помогли мне найти ошибки в первой версии,
и некоторые из них предлагали решения, которые были лучше чем мои.
В конце семестра я предложил им описать новую, оригинальную проблему
(предпочтительно с решением).
Я добавил их работы во вторую версию книги.

Также после появления первой версии книги Кеннет Рик представил статью
``Design Patterns for Semaphores'' в ACM Special Interest Group
для обучения информатике.
Он представил задачу, которую я назвал как проблема суши-бара,
а также два решения, которые демонстрируют шаблоны, названные им как 
``Pass the baton'' (передать эстафету)
и
``I'll do it for you'' (я сделаю это для тебя).
Когда я начал оценивать эти шаблоны, я смог применить их к проблемам
из первой версии книги и создать решения получше, как я считаю.

Ещё одно из изменений во второй версии - это синтаксис.
После написания первой версии, я изучил Python, который не только
отличный язык программирования, но также отличный язык для псевдокода.
Таким образом я сменил C-like синтаксис в первой версии на синтаксис,
который достаточно близок к исполняемому в Python
\footnote{Основное отличие заключается в том, что я иногда использую
отступы для обозначения кода, который защищён мютексом, что может вызвать
синтаксические ошибки в Python.}.
На самом деле, я написал симулятор, который может запустить большинство
решений в этой книге.

Читатели, которые не знакомы с Python, посчитают его (я надеюсь) очевидным.
В случаях, когда я использую специфичные для Python особенности, я объясняю
синтаксис и, что он значит.
Я надеюсь, что эти изменения сделают книгу более читабельной.

Нумерация страниц в этой книге может показаться специфичной, впрочем есть приём
для пропусков. После каждой задачи я оставляю достаточно места, чтобы подсказка
появлялась на следующей странице, а решение - на следующей после этой.
Когда я использую эту книгу на занятиях, я выдаю её на нескольких листах за раз,
а студенты собирают её в папку.
Моя система нумерации позволяет раздать задачу без подсказок или решений.
Иногда я скрепляю подсказки с задачами, и таким образом студенты сами могут
решать использовать ли подсказки и когда их использовать.
Если вы печатаете книгу на одной стороне листа, вы можете убрать пустые страницы
, и система всё равно работает.

Это свободная книга, что значит - любой может читать, копировать,
изменять и распространять её, при условии соблюдения лицензии.
Я надеюсь, что книга будет полезна для читателей, а также я надеюсь, что
они помогут продолжить развивать её, отправляя правки, предложения
и дополнительный материал.
Спасибо!

\vspace{0.3in}

\noindent Аллен Б. Дауни \\
\noindent Нидем, Массачусетс \\
\noindent 1 июня 2005 г. \\

\inc{preface/contributors}
